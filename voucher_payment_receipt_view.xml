<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="view_acc_voucher_inhe_form2" model="ir.ui.view">
            <field name="name">account.voucher.receipt.form.inherit</field>
            <field name="model">account.voucher</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="account_voucher.view_vendor_receipt_form"/>
            <field name="arch" type="xml">
                <data>
                    <field name="name" position="after" >
                        <separator string="" colspan="5"/>
                        <button colspan="1" name="get_invoices_and_credits" states="draft,proforma" type="object" icon="gtk-find" string="Get Invoices and Credits"/>
                    </field>
                    <button name="cancel_voucher" position="after">
                        <button name="compute" type="object" string="Compute" icon="gtk-execute" states="draft,proforma" />
                    </button>
                    <xpath expr='//notebook/page[@string="Payment Information"]/field[@name="line_cr_ids"]' position="before">
                        <field name="currency_id" invisible="1" />
                        <field name="payment_line_ids" nolabel="1" colspan="4" on_change="onchange_paymode_line(payment_line_ids)">
                        <tree string="Payment Lines" editable="bottom">
                            <field name="name"/>
                            <field name="date" readonly="1"/>
                            <field name="currency" readonly="1"/>
                            <field name="amount" sum="Total"/>
                        </tree>
                        <form>
                            <field name="name" readonly="1"/>
                            <field name="date" readonly="0"/>
                            <field name="currency" readonly="0"/>
                            <field name="amount"/>
                        </form>
                    </field>
                    </xpath>
                    <field  name="amount" position="replace" >
                        <field  name="amount"
                                string="Paid Amount"/>
                    </field>
                    <field name="journal_id" position="replace" >
                        <field  name="journal_id" 
                                on_change="onchange_partner_id(partner_id, journal_id, amount, currency_id, type, date, context)"
                                domain="[('type','in',['bank', 'cash'])]"
                                widget="selection" select="1" string="Payment Method"/>
                    </field>
                    
                    <xpath expr='//notebook/page[@string="Payment Information"]/field[@name="line_cr_ids"]' position="replace">
                        <field name="line_cr_ids" default_get="{'journal_id':journal_id, 'type':type, 'partner_id':partner_id}" colspan="4" nolabel="1" height="140">
                            <tree   string="Invoices and Outstanding transactions"
                                    colors="black:state=='included' ;grey:state=='not_included'">                                  >
                                <field name="move_line_id" context="{'journal_id':parent.journal_id, 'partner_id':parent.partner_id}"
                                    on_change="onchange_move_line_id(move_line_id)"
                                    domain="[('account_id.type','=','payable'), ('reconcile_id','=', False), ('partner_id','=',parent.partner_id)]"/>
                                <field name="account_id" groups="base.group_extended" domain="[('type','=','payable')]"/>
                                <field name="date_original" readonly="1"/>
                                <field name="date_due" readonly="1"/>
                                <field name="amount_original" readonly="1"/>
                                <field name="amount_unreconciled" sum="Open Balance" readonly="1"/>
                                <field name="amount" sum="Payment"/>

                                <field name="state"/>
                                <button name="add_voucher_line" 
                                        string="Add" 
                                        type="object" 
                                        icon="gtk-go-back" 
                                        states="not_included"/>
                                        
                                <button name="delete_voucher_line" 
                                        string="Remove" 
                                        type="object" 
                                        icon="gtk-cancel"
                                        states="included"/>
                            </tree>
                        </field>
                    </xpath>
                    
                    <xpath expr='//notebook/page[@string="Payment Information"]/field[@name="line_dr_ids"]' position="replace" >
                        <field name="line_dr_ids" colspan="4" editable="bottom" attrs="{'invisible': [('pre_line','=',False)]}" nolabel="1" default_get="{'journal_id':journal_id, 'partner_id':partner_id}">
                            <tree string="Credits" 
                            colors="black:state=='included' ;grey:state=='not_included'">
                                <field name="move_line_id"/>
                                <field name="account_id" groups="base.group_extended" domain="[('type','=','receivable')]"/>
                                <field name="date_original"/>
                                <field name="amount_original"/>
                                <field name="amount" sum="Payment"/>

                                <field name="state" readonly="1"/>
                                <button name="add_voucher_line" string="Add" 
                                        type="object" 
                                        icon="gtk-go-back"
                                        states="not_included"/>
                                <button name="delete_voucher_line" 
                                        string="Remove" 
                                        type="object" 
                                        icon="gtk-cancel"
                                        states="included"/>
                            </tree>
                        </field>
                    </xpath>
                    
                    <xpath expr='//notebook/page[@string="Payment Information"]/group[2]' position="replace"/>
                    <xpath expr='//notebook/page[@string="Payment Information"]/group[1]' position="replace"/>
                </data>
            </field>
        </record>
        
        <record id="view_acc_voucher_inherits_form2" model="ir.ui.view">
            <field name="name">account.voucher.payment.form.inherit</field>
            <field name="model">account.voucher</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="account_voucher.view_vendor_payment_form"/>
            <field name="arch" type="xml">
                <field name="name" position="after" >
                    <separator string="" colspan="5"/>
                    <button colspan="1" name="get_invoices_and_credits" states="draft,proforma" type="object" icon="gtk-find" string="Get Invoices and Credits"/>
                </field>
                <button name="cancel_voucher" position="after">
                    <button name="compute" type="object" string="Compute" icon="gtk-execute" states="draft,proforma" />
                </button>
                <xpath expr='//notebook/page[@string="Payment Information"]/field[@name="line_dr_ids"]' position="before">
                    <field name="currency_id" invisible="1" />
                    <field name="payment_line_ids" nolabel="1" colspan="4" on_change="onchange_paymode_line(payment_line_ids, context)">
                        <tree string="Payment Lines" editable="bottom">
                            <field name="name"/>
                            <field name="date" readonly="1"/>
                            <field name="currency" readonly="1"/>
                            <field name="amount" sum="Total"/>
                        </tree>
                        <form>
                            <field name="name" readonly="1"/>
                            <field name="date" readonly="0"/>
                            <field name="currency" readonly="0"/>
                            <field name="amount"/>
                        </form>
                    </field>
                </xpath>
                <field  name="amount" position="replace" >
                    <field  name="amount"
                            string="Paid Amount"/>
                </field>
                <field name="journal_id" position="replace" >
                    <field  name="journal_id" 
                            on_change="onchange_partner_id(partner_id, journal_id, amount, currency_id, type, date, context)"
                            domain="[('type','in',['bank', 'cash'])]"
                            widget="selection" select="1" string="Payment Method"/>
                </field>
                
                <xpath expr='//notebook/page[@string="Payment Information"]/field[@name="line_dr_ids"]' position="replace">
                    <field name="line_dr_ids" default_get="{'journal_id':journal_id, 'type':type, 'partner_id':partner_id}" colspan="4" nolabel="1" height="140">
                        <tree   string="Supplier Invoices and Outstanding transactions"
                                colors="black:state=='included' ;grey:state=='not_included'">                                  >
                            <field name="move_line_id" context="{'journal_id':parent.journal_id, 'partner_id':parent.partner_id}"
                                on_change="onchange_move_line_id(move_line_id)"
                                domain="[('account_id.type','=','payable'), ('reconcile_id','=', False), ('partner_id','=',parent.partner_id)]"/>
                            <field name="account_id" groups="base.group_extended" domain="[('type','=','payable')]"/>
                            <field name="date_original" readonly="1"/>
                            <field name="date_due" readonly="1"/>
                            <field name="amount_original" readonly="1"/>
                            <field name="amount_unreconciled" sum="Open Balance" readonly="1"/>
                            <field name="amount" sum="Payment"/>

                            <field name="state"/>
                            <button name="add_voucher_line"  
                                    string="Add" 
                                    type="object" 
                                    icon="gtk-go-back" 
                                    states="not_included"/>
                            <button name="delete_voucher_line" 
                                    string="Remove" 
                                    type="object" 
                                    icon="gtk-cancel"
                                    states="included"/>
                        </tree>
                    </field>
                </xpath>
                
                <xpath expr='//notebook/page[@string="Payment Information"]/field[@name="line_cr_ids"]' position="replace" >
                    <field name="line_cr_ids" colspan="4" editable="bottom" attrs="{'invisible': [('pre_line','=',False)]}" nolabel="1" default_get="{'journal_id':journal_id, 'partner_id':partner_id}">
                        <tree string="Credits" 
                        colors="black:state=='included' ;grey:state=='not_included'">
                            <field name="move_line_id"/>
                            <field name="account_id" groups="base.group_extended" domain="[('type','=','receivable')]"/>
                            <field name="date_original"/>
                            <field name="amount_original"/>
                            <field name="amount" sum="Payment"/>

                            <field name="state" readonly="1"/>
                            <button name="add_voucher_line" string="Add" 
                                    type="object" 
                                    icon="gtk-go-back"
                                    states="not_included"/>
                            <button name="delete_voucher_line" 
                                    string="Remove" 
                                    type="object" 
                                    icon="gtk-cancel"
                                    states="included"/>
                        </tree>
                    </field>
                </xpath>
                
                <xpath expr='//notebook/page[@string="Payment Information"]/group[2]' position="replace"/>
                <xpath expr='//notebook/page[@string="Payment Information"]/group[1]' position="replace"/>
    
            </field>
        </record>
    </data>
</openerp>
